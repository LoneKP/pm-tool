<% content_for :navigation, render('layouts/custom_setup_top_bar', obj: 'Log in', obj2: '' ) %>

<div class="row">
    <div class="col-3"></div>
    <div class="create-user-box col-6">
        <div class="mt-5">
            <i class="material-icons icon-46">person</i>
        </div>
        <p class="setup-headline-box mt-300 mb-300">Log in</p>
        <div>
            <p class="setup-subtitle">
                email
            </p>
        </div>

        <div>
            <%= form_for :session, :url => { controller: "sessions", action: "create"} do |f| %>
            <%= f.text_field :email %>

            <p class="setup-subtitle">
                Password
            </p>
         
                <%=	f.password_field :password %>
   
      
        
            <%= f.submit 'Log in' %>
            <% end %>
    </div>
    <div class="col-3"></div>
</div>



<script>

    $(document).on('turbolinks:load', function () {

        $('input').attr('autocomplete', 'off');
        $('input').attr('autocomplete', 'nope');

        $(document).ready(function () {
            validate();
            $('input#user_email, input#user_first_name, input#user_last_name, input#user_password, input#user_password_confirmation').keyup(validate);
        });


        //function to validate whether all criterias are fulfilled when typing in information in the form
        function validate() {
            firstName = $('input#user_first_name').val();
            lastName = $('input#user_last_name').val();
            email = $('input#user_email').val();
            password = $('input#user_password').val();
            password_confirmation = $('input#user_password_confirmation').val();
            if (
                firstName.length > 1 &&
                lastName.length > 1 &&
                isEmail(email) &&
                password.length > 7 &&
                password_confirmation.length > 7
            ) {
                $('.next-and-create-user-inactive').addClass("next-and-create-user")
                $('.next-and-create-user-inactive').removeClass("next-and-create-user-inactive")
                $(".next-and-create-user").prop('disabled', false);
            }
            else {
                $('.next-and-create-user').addClass("next-and-create-user-inactive")
                $('.next-and-create-user').removeClass("next-and-create-user")
                $(".next-and-create-user-inactive").prop('disabled', true);
            }
        }

        $(document).ready(function () {
            tmpval = $('input#user_first_name').val();
            if (tmpval.length < 2) {
                $('input#user_first_name').next().addClass("icon-14-check-attention");
                $('input#user_first_name').next().text('error')
                $('input#user_first_namel').next().removeClass("icon-14-check");

            } else {
                $('input#user_first_name').next().addClass("icon-14-check");
                $('input#user_first_name').next().removeClass("icon-14-check-attention");
                $('input#user_first_name').next().removeClass("icon-14-check-error");
                $('input#user_first_name').next().text('check_circle')
            }
        });

        $('input#user_first_name').keyup(function () {
            tmpval = $(this).val();
            if (tmpval.length < 2) {

                $('input#user_first_name').next().addClass("icon-14-check-attention");
                $('input#user_first_name').next().text('error')
                $('input#user_first_name').next().removeClass("icon-14-check");

            } else {
                $('input#user_first_name').next().addClass("icon-14-check");
                $('input#user_first_name').next().removeClass("icon-14-check-attention");
                $('input#user_first_name').next().removeClass("icon-14-check-error");
                $('input#user_first_name').next().text('check_circle')
            }
        });

        $(document).ready(function () {
            tmpval = $('input#user_last_name').val();
            if (tmpval.length < 2) {
                $('input#user_last_name').next().addClass("icon-14-check-attention");
                $('input#user_last_name').next().text('error')
                $('input#user_last_name').next().removeClass("icon-14-check");

            } else {
                $('input#user_last_name').next().addClass("icon-14-check");
                $('input#user_last_name').next().removeClass("icon-14-check-attention");
                $('input#user_last_name').next().removeClass("icon-14-check-error");
                $('input#user_last_name').next().text('check_circle')
            }
        });

        $('input#user_last_name').keyup(function () {
            tmpval = $(this).val();
            if (tmpval.length < 2) {

                $('input#user_last_name').next().addClass("icon-14-check-attention");
                $('input#user_last_name').next().text('error')
                $('input#user_last_name').next().removeClass("icon-14-check");

            } else {
                $('input#user_last_name').next().addClass("icon-14-check");
                $('input#user_last_name').next().removeClass("icon-14-check-attention");
                $('input#user_last_name').next().removeClass("icon-14-check-error");
                $('input#user_last_name').next().text('check_circle')
            }
        });

        $(document).ready(function () {
            tmpval = $('input#user_email').val();
            if (tmpval == '') {
                $('input#user_email').next().addClass("icon-14-check-attention");
                $('input#user_email').next().text('error')
                $('input#user_email').next().removeClass("icon-14-check");

            } else {
                $('input#user_email').next().addClass("icon-14-check");
                $('input#user_email').next().removeClass("icon-14-check-attention");
                $('input#user_email').next().removeClass("icon-14-check-error");
                $('input#user_email').next().text('check_circle')
            }
        });

        function isEmail(email) {
            var regex = /^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
            if (!regex.test(email)) {
                return false;
            } else {
                return true;
            }
        }

        $('input#user_email').keyup(function () {
            tmpval = $(this).val();

            // Change color of underline on keyup when there is an error
            $('.field_with_errors > input#user_email').parent().parent().next().removeClass("sign-up-flow-underline-error");
            $('.field_with_errors > input#user_email').parent().parent().next().addClass("sign-up-flow-underline");

            if (isEmail(tmpval)) {
                $('input#user_email').next().addClass("icon-14-check");
                $('input#user_email').next().removeClass("icon-14-check-attention");
                $('input#user_email').next().removeClass("icon-14-check-error");
                $('input#user_email').next().text('check_circle')

                // Change colors on keyup when there is an error
                $('.field_with_errors > input#user_email').parent().next().addClass("icon-14-check");
                $('.field_with_errors > input#user_email').parent().next().removeClass("icon-14-check-attention");
                $('.field_with_errors > input#user_email').parent().next().removeClass("icon-14-check-error");
                $('.field_with_errors > input#user_email').parent().next().text('check_circle')

            } else {
                $('input#user_email').next().addClass("icon-14-check-attention");
                $('input#user_email').next().text('error')
                $('input#user_email').next().removeClass("icon-14-check");

                // Change colors on keyup when there is an error
                $('.field_with_errors > input#user_email').parent().next().addClass("icon-14-check-attention");
                $('.field_with_errors > input#user_email').parent().next().text('error')
                $('.field_with_errors > input#user_email').parent().next().removeClass("icon-14-check");
            }
        });

        $(document).ready(function () {
            tmpval = $('input#user_password').val();
            if (tmpval.length < 8) {
                $('input#user_password').next().addClass("icon-14-check-attention");
                $('input#user_password').next().text('error')
                $('input#user_password').next().removeClass("icon-14-check");

            } else {
                $('input#user_password').next().addClass("icon-14-check");
                $('input#user_password').next().removeClass("icon-14-check-attention");
                $('input#user_password').next().removeClass("icon-14-check-error");
                $('input#user_password').next().text('check_circle')
            }
        });

        $('input#user_password').keyup(function () {
            tmpval = $(this).val();

            // Change color of underline on keyup when there is an error
            $('.field_with_errors > input#user_password').parent().parent().next().removeClass("sign-up-flow-underline-error");
            $('.field_with_errors > input#user_password').parent().parent().next().addClass("sign-up-flow-underline");

            if (tmpval.length < 8) {

                $('input#user_password').next().addClass("icon-14-check-attention");
                $('input#user_password').next().text('error')
                $('input#user_password').next().removeClass("icon-14-check");

                $('.field_with_errors > input#user_password').parent().next().addClass("icon-14-check-attention");
                $('.field_with_errors > input#user_password').parent().next().text('error')
                $('.field_with_errors > input#user_password').parent().next().removeClass("icon-14-check");

            } else {
                $('input#user_password').next().addClass("icon-14-check");
                $('input#user_password').next().removeClass("icon-14-check-attention");
                $('input#user_password').next().removeClass("icon-14-check-error");
                $('input#user_password').next().text('check_circle')

                $('.field_with_errors > input#user_password').parent().next().addClass("icon-14-check");
                $('.field_with_errors > input#user_password').parent().next().removeClass("icon-14-check-attention");
                $('.field_with_errors > input#user_password').parent().next().removeClass("icon-14-check-error");
                $('.field_with_errors > input#user_password').parent().next().text('check_circle')
            }
        });

        $(document).ready(function () {
            tmpval = $('input#user_password_confirmation').val();
            if (tmpval.length < 8) {
                $('input#user_password_confirmation').next().addClass("icon-14-check-attention");
                $('input#user_password_confirmation').next().text('error')
                $('input#user_password_confirmation').next().removeClass("icon-14-check");

            } else {
                $('input#user_password_confirmation').next().addClass("icon-14-check");
                $('input#user_password_confirmation').next().removeClass("icon-14-check-attention");
                $('input#user_password_confirmation').next().removeClass("icon-14-check-error");
                $('input#user_password_confirmation').next().text('check_circle')
            }
        });

        $('input#user_password_confirmation').keyup(function () {

            // Change color of underline on keyup when there is an error
            $('.field_with_errors > input#user_password_confirmation').parent().parent().next().removeClass("sign-up-flow-underline-error");
            $('.field_with_errors > input#user_password_confirmation').parent().parent().next().addClass("sign-up-flow-underline");

            tmpval = $(this).val();
            if (tmpval.length < 8) {

                $('input#user_password_confirmation').next().addClass("icon-14-check-attention");
                $('input#user_password_confirmation').next().text('error')
                $('input#user_password_confirmation').next().removeClass("icon-14-check");

                $('.field_with_errors > input#user_password_confirmation').parent().next().addClass("icon-14-check-attention");
                $('.field_with_errors > input#user_password_confirmation').parent().next().text('error')
                $('.field_with_errors > input#user_password_confirmation').parent().next().removeClass("icon-14-check");

            } else {
                $('input#user_password_confirmation').next().addClass("icon-14-check");
                $('input#user_password_confirmation').next().removeClass("icon-14-check-attention");
                $('input#user_password_confirmation').next().removeClass("icon-14-check-error");
                $('input#user_password_confirmation').next().text('check_circle')

                $('.field_with_errors > input#user_password_confirmation').parent().next().addClass("icon-14-check");
                $('.field_with_errors > input#user_password_confirmation').parent().next().removeClass("icon-14-check-attention");
                $('.field_with_errors > input#user_password_confirmation').parent().next().removeClass("icon-14-check-error");
                $('.field_with_errors > input#user_password_confirmation').parent().next().text('check_circle')
            }
        });


    });
</script>